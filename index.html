<style>
  :root{
    --bg: #0f1419;
    --card: #141a21;
    --text: #eaf0f6;
    --muted:#9fb0c1;
    --ring:#2e7cf7;
    --ring-15:#ff8a22;
    --accent:#2e7cf7;
    --accent-press:#1f66d6;
    --btn:#1a2230;
    --btn-text:#eaf0f6;
    --pill:#10161d;
    --pill-border:#243040;
    --shadow: 0 4px 12px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.1);
    --warn-fill: rgba(255,138,34,.15);
  }
  .light{
    --bg:#f6f8fb;
    --card:#ffffff;
    --text:#0b1722;
    --muted:#6b7c8d;
    --ring:#1f6eff;
    --ring-15:#ff7a1a;
    --accent:#1f6eff;
    --accent-press:#0d50c9;
    --btn:#f3f5f8;
    --btn-text:#0b1722;
    --pill:#f6f8fb;
    --pill-border:#e4e9ef;
    --shadow: 0 4px 12px rgba(20,30,40,.08), 0 1px 2px rgba(20,30,40,.05);
    --warn-fill: rgba(255,122,26,.15);
  }
  @media (prefers-color-scheme: light){
    :root.auto{
      --bg:#f6f8fb;
      --card:#ffffff;
      --text:#0b1722;
      --muted:#6b7c8d;
      --ring:#1f6eff;
      --ring-15:#ff7a1a;
      --accent:#1f6eff;
      --accent-press:#0d50c9;
      --btn:#f3f5f8;
      --btn-text:#0b1722;
      --pill:#f6f8fb;
      --pill-border:#e4e9ef;
      --shadow: 0 4px 12px rgba(20,30,40,.08), 0 1px 2px rgba(20,30,40,.05);
      --warn-fill: rgba(255,122,26,.15);
    }
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1200px 500px at 50% -200px, rgba(255,255,255,.06), transparent 60%) , var(--bg);
    color:var(--text);
    font: 16px/1.45 system-ui, -apple-system, "SF Pro Text", Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  }
  .wrap{max-width:980px;margin:24px auto;padding:0 16px}
  header{display:flex;justify-content:center;align-items:center;margin:12px 0 20px}
  .app-title{
    font-weight:800;
    letter-spacing:.2px;
    font-size: clamp(22px, 3.4vw, 32px);
    text-shadow: 0 2px 16px rgba(0,0,0,.25);
  }
  .cards{display:flex; flex-direction:column; gap:12px}
  .card{
    background:var(--card);
    border-radius:22px;
    box-shadow: var(--shadow);
    padding:18px 18px 22px;
  }
  .main{display:flex;flex-direction:column; align-items:center}
  .ring-wrap{width:min(60vw, 420px); max-width:420px; aspect-ratio:1/1; position:relative; margin-bottom: 56px;}
  svg{width:100%;height:100%;display:block}
  .ring-bg{stroke: var(--pill-border); opacity:1}
  .ring{stroke:var(--ring); transition: stroke .2s ease}
  .time{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center; flex-direction:column;
    pointer-events:none; text-align:center;
  }
  .time .digits{
    font-weight:800;
    letter-spacing: .5px;
    font-size:clamp(80px, 12vw, 120px);
    text-shadow: 0 2px 16px rgba(0,0,0,.25);
  }
  .status{
    margin-top:6px;
    color:var(--muted);
    font-weight:600;
    letter-spacing:.2px;
  }
  .status strong{
    font-weight: 800;
  }
  .status strong.orange{
    color: var(--ring-15);
  }
  .row{display:flex; gap:12px; flex-wrap:nowrap; justify-content:center; align-items:center}
  .btn{
    background:var(--btn);
    color:var(--btn-text);
    padding:14px 18px;
    border-radius:14px;
    border:1px solid transparent;
    box-shadow: var(--shadow);
    font-weight:800;
    letter-spacing:.3px;
    cursor:pointer; user-select:none;
    transition: transform .03s ease, background .15s ease, border-color .15s ease;
  }
  .btn:active{transform: scale(0.98);}
  .btn-primary{
    background:var(--accent); color:white;
    padding:14px 18px; font-size:16px;
    flex: 1; min-width: 150px; text-align: center;
  }
  .btn-primary:active{background:var(--accent-press)}
  .btn.orange{
    background: var(--ring-15);
    color: white;
  }
  .btn.orange:active{
    background: #e67a1e;
  }
  .btn-ghost{background:var(--pill); border-color:var(--pill-border)}
  .btn-subtle{background:none; border-color:var(--pill-border); color:var(--text); box-shadow:none; padding:13px 18px}
  .btn-subtle:active{background:var(--pill); transform: none}
  .pill{padding:7px 14px; border-radius:999px; background:var(--pill); color:var(--text); border:1px solid var(--pill-border); font-weight:700; font-size:14px; box-shadow:var(--shadow);}
  .pill.active{outline:3px solid rgba(47,128,255,.35)}
  .pill.complete{
    background:var(--warn-fill);
    color: var(--ring-15);
    border-color: var(--ring-15);
  }
  .subtle{color:var(--muted); font-weight:700}
  .subtle strong{color:var(--text)}
  .grid{display:grid; gap:10px; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); align-items:center}
  .footer-row{display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; align-items:center}
  .logbox{padding:12px 14px; background:var(--pill); border:1px solid var(--pill-border); border-radius:14px; flex:1; line-height:1.9; margin-top:20px; box-shadow:var(--shadow);}
  .log-entry{padding:10px 2px; border-top:1px solid var(--pill-border); margin-top:2px}
  .log-entry:first-child{border-top:0; margin-top:0}
  .small{font-size:13px}
  .hidden{display:none !important}
  .center{display:flex; align-items:center; justify-content:center}

  /* Compact Preset Buttons */
  .preset-btn {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 12px 0;
    background: var(--btn);
    color: var(--btn-text);
    border-radius: 14px;
    border: 1px solid var(--pill-border);
    box-shadow: none;
    cursor: pointer;
    user-select: none;
    transition: transform .03s ease, background .15s ease, border-color .15s ease;
    text-align: center;
  }
  .preset-btn:active{transform: scale(0.98);}

  /* Consistent active preset pill */
  .preset-btn.active{
    background: rgba(47,128,255,.1);
    color: var(--accent);
    border-color: var(--accent);
    box-shadow: none;
  }
  .preset-btn.active:active{background: rgba(47,128,255,.15);}
  .preset-btn .time-label {
    font-weight: 800;
    letter-spacing: .3px;
    font-size: 16px;
  }
  .preset-btn .sets-label {
    color: var(--muted);
    font-weight: 700;
    font-size: 14px;
    line-height: 1.2;
    margin-top: 2px;
    letter-spacing: .2px;
  }
  .preset-btn.active .sets-label{
    color: var(--accent);
  }

  /* Subordinate style for log and settings elements */
  #log, .pill, .btn-ghost{
      box-shadow: none;
  }
  .pill, .btn-ghost{
    background: var(--btn);
    border-color: var(--pill-border);
  }
  #log{
    background: var(--pill);
    border-color: var(--pill-border);
  }
  .pill.active{
    outline:3px solid rgba(47,128,255,.35);
  }

  /* Log entries are now more subtle */
  .log-entry{
    font-size: 14px;
    color: var(--text);
  }
  .log-entry strong{
    color: var(--text);
  }
  .logbox {
    box-shadow: var(--shadow);
  }
  .footer-row .btn-ghost{
    box-shadow: none;
  }

  /* Subtle pill buttons for custom/manage/settings */
  .footer-links{
    display: flex;
    gap: 12px;
    justify-content: center;
    margin-top: 16px;
  }
  .footer-links button{
    font-weight: 700;
    font-size: 14px;
    padding: 7px 14px;
    border-radius: 999px;
    background: var(--btn);
    color: var(--muted);
    border: 1px solid var(--pill-border);
    cursor: pointer;
    transition: background .15s ease;
  }
  .footer-links button:active{
    background: var(--pill-border);
  }

  /* Modal styles */
  .modal{
    position:fixed; inset:0; z-index:100;
    background:rgba(0,0,0,.8);
    backdrop-filter: blur(8px);
    display:flex; align-items:center; justify-content:center;
    opacity:0; pointer-events:none;
    transition: opacity .15s ease;
  }
  .modal.active{
    opacity:1; pointer-events:auto;
  }
  .modal-content{
    background:var(--card);
    border-radius:24px;
    width:min(90vw, 420px);
    padding:24px;
    box-shadow: var(--shadow);
    transform: translateY(16px);
    transition: transform .25s ease;
    max-width: 420px;
    margin: 12px;
  }
  .modal.active .modal-content{
    transform: translateY(0);
  }
  .modal-title{
    font-size:22px;
    font-weight:800;
    text-align:center;
    margin-bottom:20px;
    letter-spacing: .2px;
  }
  .modal-row{display:flex; gap:12px; margin-top:16px}
  .modal-row .btn{flex:1}
  .modal-input{
    background:var(--pill);
    border:1px solid var(--pill-border);
    color:var(--text);
    padding:12px 18px;
    border-radius:14px;
    width:100%;
    font-size:16px;
    font-family: inherit;
  }
  .modal-label{font-weight:700; margin-bottom:6px; color:var(--muted)}
  .modal-list{
    max-height: 240px; overflow-y:auto; margin:-12px; padding:12px;
    border-radius:12px;
    background:rgba(0,0,0,.04);
  }
  .modal-list-item{
    padding:10px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:var(--card);
    border-radius:10px;
  }
  .modal-list-item+.modal-list-item{margin-top:8px}
  .modal-list-item span{font-weight:600}
  .modal-list-item .delete-btn{
    background:none;
    border:none;
    font-size:20px;
    color:#ff6666;
    padding:4px 8px;
    cursor:pointer;
  }
  .setting-row{
    display:flex; justify-content:space-between; align-items:center;
    padding:12px 0; border-top:1px solid var(--pill-border);
    font-weight:600;
    color:var(--text);
  }
  .setting-row:first-child{border-top:none}

  /* Toggle Switch */
  .toggle-switch {
    position: relative;
    display: inline-block;
    width: 48px;
    height: 26px;
  }
  .toggle-switch input { display:none; }
  .toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--btn);
    border: 1px solid var(--pill-border);
    transition: .4s;
    border-radius: 26px;
  }
  .toggle-slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 2px;
    background-color: var(--muted);
    transition: .4s;
    border-radius: 50%;
  }
  .toggle-switch input:checked + .toggle-slider {
    background-color: var(--accent);
    border-color: var(--accent);
  }
  .toggle-switch input:checked + .toggle-slider:before {
    transform: translateX(20px);
    background-color: white;
  }

  /* Additions for timer pulse animation */
  @keyframes timepulse {
    0% { transform: scale(1); }
    40% { transform: scale(1.025); }
    100% { transform: scale(1); }
  }
  .time .digits.pulse {
    animation: timepulse .28s ease-out;
  }

  @media (max-width: 560px){
    .row{gap:8px}
    .btn{
      flex-grow: 1;
      padding: 12px 0;
      min-width: unset;
      font-size: 14px;
      line-height: 1.2;
    }
    .btn-primary {
      flex-grow: 1.5; /* Give the primary button a bit more space */
    }
    .btn-subtle {
      padding: 11px 0;
    }
    .footer-links{
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 8px;
    }
    #setRow{
      margin-top: 40px;
    }
  }
</style>
